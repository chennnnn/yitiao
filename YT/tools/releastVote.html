<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <link href="../css/mui.css" rel="stylesheet"/>
    <script src="../js/mui.min.js"></script>
    <link rel="stylesheet" href="../css/layer.css" />
    <link rel="stylesheet" href="../css/app.css" />
    <script type="text/javascript" charset="utf-8">
      	mui.init();
    </script>
</head>
<body>
	<header class="mui-bar mui-bar-nav login-header">
	    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
	    <h1 class="mui-title">发布投票</h1>
	    <a href="#" class="mui-pull-right mui-btn header-submit">提交</a>
	</header>
	<div class="mui-content" style="background-color: #fff;">
		
		<form class="mui-input-group login-from vote-form">
			    <div class="mui-input-row">
			        <input type="tel" value="" class="mui-input-clear" placeholder="投票主题(不超过30个字)">
	 
			    </div> 
			    <div class="mui-input-row">
			        <input type="password" value="" class="mui-input-clear" placeholder="选项1,请输入15字以内描述">
			    </div>
			    <div class="mui-input-row">
			        <input type="password" value="" class="mui-input-clear" placeholder="选项2,请输入15字以内描述">
			    </div>
			    
			     <a  class="mui-btn mui-btn-block add-vote"><i class="mui-icon mui-icon-plusempty"></i>新建投票选项</a>
			     
			     <div class="mui-row">
			     	<span class="mui-pull-left ellipse location"><span class="location-name">北京</span><a href="javascript:;" class="del-location"></a></span>
			     	<span class="mui-pull-right ellipse status" id="status">
			     		<span>公开</span>
			     		<ul>
			     			<li>公开</li>
			     			<li>私密</li>
			     		</ul>
			     	</span>
			     </div>
			     
		</form>
	</div>
	<script type="text/javascript" src="../js/zepto.min.js"></script>
	<!--<script type="text/javascript" src="../js/touch.js"></script>-->
	<script type="text/javascript" src="../js/layer.js"></script>
	<script type="text/javascript">
		mui.plusReady(function() {
			
			$('.location .del-location').on('tap',function() {
				if (!$('.location').hasClass('hide')) {
									$('.location').addClass('hide').find('.location-name').html('显示位置 ');
				}
			});
			
			$('.location .location-name').on('tap', function(e){
				if (!$('.location').hasClass('hide')) {
					$('.location').addClass('hide');
				}
				$(this).html('获取位置中...');
			});
			
			$('.location').on('touchend', function(e){
				e.preventDefault(); 
			});
			
			$('#status').on('tap', function(e) {
				if ($('#status > span').html().trim() == '公开') {
					$('#status > ul').html('<li>公开</li><li>私密</li>');
				} else {
					$('#status > ul').html('<li>私密</li><li>公开</li>');
				}
				$('#status > ul').show();
				e.preventDefault();
			});
			
			$('#status').on('tap', 'li', function(e) {
				$('#status > ul').hide();
				$('#status > span').html($(this).html());
				e.stopPropagation();
			});
			
			$('#status li').on('touchend',function(e){
				e.preventDefault();
			});
			
			$('#status').on('touchend',function(e){
				e.preventDefault();
			});
			
			$('.add-vote').on('tap', function() {
				var len = $('.vote-form .mui-input-row').length - 1;				
				var str = '<div class="mui-input-row"><input type="password" value="" class="mui-input-clear" placeholder="选项' + (len + 1) +',请输入15字以内描述"><span class="mui-icon mui-icon-clear mui-hidden"></span><a href="javasript:;" class="delete-item mui-icon-closeempty"></a></div>';
				$('.add-vote').before(str);
			});
			
			$('.vote-form').on('tap','.delete-item', function(e){
				$(this).parents('.mui-input-row').remove();
				e.preventDefault();
			})
			
			$('.add-vote').on('touchend',function(e) {
				e.preventDefault();
			});
			
		});
	</script>
</body>
</html>