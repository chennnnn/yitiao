<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="js/mui.min.js"></script>
		<link href="css/mui.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/app.css" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav login-header">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">注册</h1>
		</header>

		<div class="mui-content" style="background-color: #fff;">
			<div class="p-20"></div>

			<form class="mui-input-group login-from">
				<div class="mui-input-row">
					<input type="tel" id="phpne" class="mui-input-clear" placeholder="手机号">
				</div>
				<div class="mui-input-row">
					<input type="text" class="mui-input-clear" placeholder="验证码">
					<input type="button" onclick="settime(this);" class="reg_code" value="免费获取验证码" />
				</div>
				<div class="mui-input-row">
					<input type="password" id="paw" class="mui-input-clear" placeholder="密码">
				</div>
				<div class="mui-input-row">
					<input type="text" class="mui-input-clear" placeholder="邀请码">
				</div>
				<h5 class="yq_info">没有收到邀请码？</h5>
				<br />
				<a class="login-btn" id="regBtns"><span class="mui-icon mui-icon-checkmarkempty"></span></a>

				<div class="login-link">
					注册表示同意用户
					<a class="color-lv" href="#">服务与用户使用权益</a>
				</div>
			</form>
		</div>
		<script type="text/javascript">
			mui.plusReady(function() {
				var webUrl = plus.storage.getItem("web");
				plus.screen.lockOrientation("portrait-primary");
				
				document.getElementById("regBtns").addEventListener('tap', function() {
					var u = document.getElementById("phpne").value;
					var p = document.getElementById("paw").value;
					var user = {
							phone:u,
							password:p
					}
					
					var code = "111233";
					
					console.log(JSON.stringify(user));
					console.log(webUrl+"/moblie/user/register/"+code);
					mui.ajax(webUrl+"/moblie/user/register/"+code,{
						data:JSON.stringify(user),
						dataType:'json',//服务器返回json格式数据
						type:'post',//HTTP请求类型
						headers:{'Content-type': 'application/json;charset=UTF-8'},	              
						success:function(data){
							//服务器返回响应，根据响应结果，分析是否登录成功；
							console.log("s"+data);
						},
						error:function(xhr,type,errorThrown){
							//异常处理；
							console.log("e"+type);
						}
					});
					
					
					//mui.openWindow('login.html', 'index', {})
				});

			});
		</script>

		<script type="text/javascript">
			var countdown = 60;

			function settime(val) {
				if(countdown == 0) { 
					//val.removeAttribute("disabled");
					val.innerHTML = "免费获取验证码";
					countdown = 60;
				} else {
					val.setAttribute("disabled", true);
					val.value = countdown + "S后重新获取";
					countdown--;
				}
				setTimeout(function() {
					settime(val)
				}, 1000)
			}
		</script>

	</body>

</html>